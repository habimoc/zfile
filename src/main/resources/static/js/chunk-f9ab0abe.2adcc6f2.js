(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9ab0abe"],{"1d20":function(e,t,n){"use strict";n("469c")},"469c":function(e,t,n){},"8d1d":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",[n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.addDrive}},[e._v("新增")])],1),n("el-table",{ref:"driveTable",attrs:{data:e.driveList,"row-key":"id","highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"id",width:"80",label:"驱动器ID"}}),n("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,label:"驱动器名称"}}),n("el-table-column",{attrs:{prop:"type",formatter:e.typeFormatter,"show-overflow-tooltip":!0,width:"100",label:"所属策略"}}),n("el-table-column",{attrs:{prop:"enable",width:"100",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchEnableStatus(t.row)}},model:{value:t.row.enable,callback:function(n){e.$set(t.row,"enable",n)},expression:"scope.row.enable"}})]}}])}),n("el-table-column",{attrs:{prop:"enableCache",width:"100",label:"缓存开启"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchCacheEnableStatus(t.row)}},model:{value:t.row.enableCache,callback:function(n){e.$set(t.row,"enableCache",n)},expression:"scope.row.enableCache"}})]}}])}),n("el-table-column",{attrs:{prop:"autoRefreshCache",width:"120",label:"缓存自动刷新"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchAutoRefreshStatus(t.row)}},model:{value:t.row.autoRefreshCache,callback:function(n){e.$set(t.row,"autoRefreshCache",n)},expression:"scope.row.autoRefreshCache"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[[n("el-button",{staticClass:"el-icon-edit",attrs:{slot:"reference",size:"mini",type:"primary"},on:{click:function(n){return e.editDrive(t.row)}},slot:"reference"},[e._v("编辑")]),n("el-button",{staticClass:"el-icon-s-operation",attrs:{slot:"reference",disabled:!t.row.enableCache,size:"mini",type:"primary"},on:{click:function(n){return e.cacheManage(t.row)}},slot:"reference"},[e._v("缓存管理")]),n("el-button",{staticClass:"el-icon-view",attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.showFilterDialog(t.row)}}},[e._v("文件过滤")]),n("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.deleteDrive(t.row)}}},[e._v("删除")])]]}}])})],1),n("el-dialog",{attrs:{width:"80%",title:"驱动器设置","modal-append-to-body":!1,visible:e.driveEditDialogVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.driveEditDialogVisible=t}}},[n("drive-edit",{attrs:{"drive-item":e.driveItem,"dialog-visible":e.driveEditDialogVisible,"support-strategy":e.supportStrategy}})],1),n("el-dialog",{attrs:{width:"40%",title:"过滤规则",visible:e.filterDialogVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.filterDialogVisible=t}}},[n("el-form",{ref:"filterForm",staticStyle:{"margin-left":"60px"},attrs:{id:"filterForm",model:e.filterForm,"label-width":"120px"}},[e._l(e.filterForm.filterList,(function(t,o){return n("div",{key:o},[n("el-row",[n("el-col",{attrs:{span:20}},[n("el-form-item",{attrs:{prop:"filterList."+o+".expression",rules:{required:!0,message:"此项不能为空",trigger:"blur"},label:"表达式 "+(o+1)}},[n("el-input",{model:{value:t.expression,callback:function(n){e.$set(t,"expression",n)},expression:"item.expression"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.deleteFilterItem(o)}}},[e._v("删除\n                            ")])],1)],1)],1)})),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addFilterItem}},[e._v("添加更多\n                    ")])],1),n("el-form-item",[n("span",{staticClass:"zfile-word-aux",staticStyle:{"margin-left":"0"}},[e._v("\n                        表达式规则:\n                        "),n("br"),e._v("\n                        *: 单级路径通配符，如表达式 /*.jpg，可以匹配根路径下所有的 jpg 后缀的文件\n                        "),n("br"),e._v("\n                        **: 多级路径通配符，如表达式 **.jpg，可以匹配所有路径下的 jpg 后缀的文件\n                        "),n("br"),e._v("\n                        注意："),n("b",[e._v("/a.png")]),e._v(" 表示根路径下的 a.png。 "),n("b",[e._v("/a/b/c.png")]),e._v("，表示 /a/b/ 路径下的 c.png。 "),n("b",[e._v("a.png")]),e._v("，什么都不表示，因为未标注路径。\n                    ")])])],2),n("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right","margin-top":"15px"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-check"},on:{click:e.saveFilterForm}},[e._v("保存")])],1)],1),n("el-dialog",{attrs:{width:"70%",title:"缓存管理",visible:e.cacheManageVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.cacheManageVisible=t},close:e.closeCacheManage}},[n("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("缓存数")]),n("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",round:"",type:"danger"},on:{click:e.clearCache}},[e._v("清理缓存")])],1),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.cacheCount)}})])],1),n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("命中数")])]),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.hitCount)}})])],1),n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("未命中数")])]),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.missCount)}})])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{placeholder:"输入关键字搜索"},model:{value:e.cacheSearch,callback:function(t){e.cacheSearch=t},expression:"cacheSearch"}})],1),n("el-col",{attrs:{span:4}},[n("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary"},on:{click:e.refreshCacheManageData}},[e._v("刷新统计信息")])],1)],1),n("el-table",{staticStyle:{width:"100%","overflow-y":"auto"},attrs:{height:"50vh",data:e.driveCacheInfo.cacheKeys.filter((function(t){return!e.cacheSearch||t.name.toLowerCase().includes(e.cacheSearch.toLowerCase())}))}},[n("el-table-column",{attrs:{prop:"name",label:"缓存 Key (文件夹名称)","min-width":"75%"}}),n("el-table-column",{attrs:{"min-width":"25%",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:function(n){return e.refreshCache(t.row)}}},[e._v("刷新缓存")])]}}])})],1)],1)],1)},i=[];n("3441"),n("a450");function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function r(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var l=r(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),s=r(/Edge/i),c=r(/firefox/i),u=r(/safari/i)&&!r(/chrome/i)&&!r(/android/i),d=r(/iP(ad|od|hone)/i),h=r(/chrome/i)&&r(/android/i),p={capture:!1,passive:!1};function f(e,t,n){e.addEventListener(t,n,!l&&p)}function m(e,t,n){e.removeEventListener(t,n,!l&&p)}function g(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function v(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function b(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&g(e,t):g(e,t))||o&&e===n)return e;if(e===n)break}while(e=v(e))}return null}var y,w=/\s+/g;function C(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(w," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(w," ")}}function _(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function S(e,t){var n="";if("string"==typeof e)n=e;else do{var o=_(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function E(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,a=o.length;if(n)for(;i<a;i++)n(o[i],i);return o}return[]}function D(){return document.scrollingElement||document.documentElement}function x(e,t,n,o,i){if(e.getBoundingClientRect||e===window){var a,r,s,c,u,d,h;if(e!==window&&e!==D()?(r=(a=e.getBoundingClientRect()).top,s=a.left,c=a.bottom,u=a.right,d=a.height,h=a.width):(r=0,s=0,c=window.innerHeight,u=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!l))do{if(i&&i.getBoundingClientRect&&("none"!==_(i,"transform")||n&&"static"!==_(i,"position"))){var p=i.getBoundingClientRect();r-=p.top+parseInt(_(i,"border-top-width")),s-=p.left+parseInt(_(i,"border-left-width")),c=r+a.height,u=s+a.width;break}}while(i=i.parentNode);if(o&&e!==window){var f=S(i||e),m=f&&f.a,g=f&&f.d;f&&(c=(r/=g)+(d/=g),u=(s/=m)+(h/=m))}return{top:r,left:s,bottom:c,right:u,width:h,height:d}}}function I(e,t,n){for(var o=P(e,!0),i=x(e)[t];o;){var a=x(o)[n];if(!("top"===n||"left"===n?i>=a:i<=a))return o;if(o===D())break;o=P(o,!1)}return!1}function k(e,t,n){for(var o=0,i=0,a=e.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==ze.ghost&&a[i]!==ze.dragged&&b(a[i],n.draggable,e,!1)){if(o===t)return a[i];o++}i++}return null}function T(e,t){for(var n=e.lastElementChild;n&&(n===ze.ghost||"none"===_(n,"display")||t&&!g(n,t));)n=n.previousElementSibling;return n||null}function M(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===ze.clone||t&&!g(e,t)||n++;return n}function N(e){var t=0,n=0,o=D();if(e)do{var i=S(e);t+=e.scrollLeft*i.a,n+=e.scrollTop*i.d}while(e!==o&&(e=e.parentNode));return[t,n]}function P(e,t){if(!e||!e.getBoundingClientRect)return D();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=_(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return D();if(o||t)return n;o=!0}}}while(n=n.parentNode);return D()}function A(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function O(e,t){return function(){if(!y){var n=arguments,o=this;1===n.length?e.call(o,n[0]):e.apply(o,n),y=setTimeout((function(){y=void 0}),t)}}}function R(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function F(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function z(e,t){_(e,"position","absolute"),_(e,"top",t.top),_(e,"left",t.left),_(e,"width",t.width),_(e,"height",t.height)}function q(e){_(e,"position",""),_(e,"top",""),_(e,"left",""),_(e,"width",""),_(e,"height","")}var $="Sortable"+(new Date).getTime(),L=[],X={initializeByDefault:!0},Y={mount:function(e){for(var t in X)X.hasOwnProperty(t)&&!(t in e)&&(e[t]=X[t]);L.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var i=e+"Global";L.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][i]&&t[o.pluginName][i](a({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](a({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var i in L.forEach((function(o){var i=o.pluginName;if(e.options[i]||o.initializeByDefault){var a=new o(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,Object.assign(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);void 0!==a&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return L.forEach((function(o){"function"==typeof o.eventProperties&&Object.assign(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return L.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(o=i.optionListeners[t].call(e[i.pluginName],n))})),o}};function B(e){var t=e.sortable,n=e.rootEl,o=e.name,i=e.targetEl,r=e.cloneEl,c=e.toEl,u=e.fromEl,d=e.oldIndex,h=e.newIndex,p=e.oldDraggableIndex,f=e.newDraggableIndex,m=e.originalEvent,g=e.putSortable,v=e.extraEventProperties;if(t=t||n&&n[$]){var b,y=t.options,w="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||l||s?(b=document.createEvent("Event")).initEvent(o,!0,!0):b=new CustomEvent(o,{bubbles:!0,cancelable:!0}),b.to=c||n,b.from=u||n,b.item=i||n,b.clone=r,b.oldIndex=d,b.newIndex=h,b.oldDraggableIndex=p,b.newDraggableIndex=f,b.originalEvent=m,b.pullMode=g?g.lastPutMode:void 0;var C=a({},v,Y.getEventProperties(o,t));for(var _ in C)b[_]=C[_];n&&n.dispatchEvent(b),y[w]&&y[w].call(t,b)}}var j=function(e,t,n){var o=void 0===n?{}:n,i=o.evt,r=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)t.indexOf(n=a[o])>=0||(i[n]=e[n]);return i}(o,["evt"]);Y.pluginEvent.bind(ze)(e,t,a({dragEl:H,parentEl:V,ghostEl:W,rootEl:U,nextEl:G,lastDownEl:J,cloneEl:Z,cloneHidden:Q,dragStarted:he,putSortable:ae,activeSortable:ze.active,originalEvent:i,oldIndex:ee,oldDraggableIndex:ne,newIndex:te,newDraggableIndex:oe,hideGhostForTarget:Pe,unhideGhostForTarget:Ae,cloneNowHidden:function(){Q=!0},cloneNowShown:function(){Q=!1},dispatchSortableEvent:function(e){K({sortable:t,name:e,originalEvent:i})}},r))};function K(e){B(a({putSortable:ae,cloneEl:Z,targetEl:H,rootEl:U,oldIndex:ee,oldDraggableIndex:ne,newIndex:te,newDraggableIndex:oe},e))}var H,V,W,U,G,J,Z,Q,ee,te,ne,oe,ie,ae,re,le,se,ce,ue,de,he,pe,fe,me,ge,ve=!1,be=!1,ye=[],we=!1,Ce=!1,_e=[],Se=!1,Ee=[],De="undefined"!=typeof document,xe=d,Ie=s||l?"cssFloat":"float",ke=De&&!h&&!d&&"draggable"in document.createElement("div"),Te=function(){if(De){if(l)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Me=function(e,t){var n=_(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=k(e,0,t),a=k(e,1,t),r=i&&_(i),l=a&&_(a),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+x(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+x(a).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":i&&r.float&&"none"!==r.float?!a||"both"!==l.clear&&l.clear!==("left"===r.float?"left":"right")?"horizontal":"vertical":i&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=o&&"none"===n[Ie]||a&&"none"===n[Ie]&&s+c>o)?"vertical":"horizontal"},Ne=function(e){function t(e,n){return function(o,i,a,r){if(null==e&&(n||o.options.group.name&&i.options.group.name&&o.options.group.name===i.options.group.name))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,i,a,r),n)(o,i,a,r);var l=(n?o:i).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},o=e.group;o&&"object"==typeof o||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},Pe=function(){!Te&&W&&_(W,"display","none")},Ae=function(){!Te&&W&&_(W,"display","")};De&&document.addEventListener("click",(function(e){if(be)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),be=!1,!1}),!0);var Oe,Re=function(e){if(H){var t=(i=(e=e.touches?e.touches[0]:e).clientX,a=e.clientY,ye.some((function(e){if(!T(e)){var t=x(e),n=e[$].options.emptyInsertThreshold;return n&&i>=t.left-n&&i<=t.right+n&&a>=t.top-n&&a<=t.bottom+n?r=e:void 0}})),r);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[$]._onDragOver(n)}}var i,a,r},Fe=function(e){H&&H.parentNode[$]._isOutsideThisEl(e.target)};function ze(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Object.assign({},t),e[$]=this;var n,o,i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Me(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ze.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in Y.initializePlugins(this,e,i),i)!(r in t)&&(t[r]=i[r]);for(var l in Ne(t),this)"_"===l.charAt(0)&&"function"==typeof this[l]&&(this[l]=this[l].bind(this));this.nativeDraggable=!t.forceFallback&&ke,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?f(e,"pointerdown",this._onTapStart):(f(e,"mousedown",this._onTapStart),f(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(f(e,"dragover",this),f(e,"dragenter",this)),ye.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Object.assign(this,(o=[],{captureAnimationState:function(){o=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(e){if("none"!==_(e,"display")&&void 0!==e){o.push({target:e,rect:x(e)});var t=a({},o[o.length-1].rect);if(e.thisAnimationDuration){var n=S(e,!0);n&&(t.top-=n.f,t.left-=n.e)}e.fromRect=t}}))},addAnimationState:function(e){o.push(e)},removeAnimationState:function(e){o.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(o,{target:e}),1)},animateAll:function(e){var t=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof e&&e());var i=!1,a=0;o.forEach((function(e){var n=0,o=e.target,r=o.fromRect,l=x(o),s=o.prevFromRect,c=o.prevToRect,u=e.rect,d=S(o,!0);d&&(l.top-=d.f,l.left-=d.e),o.toRect=l,o.thisAnimationDuration&&A(s,l)&&!A(r,l)&&(u.top-l.top)/(u.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(n=function(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}(u,s,c,t.options)),A(l,r)||(o.prevFromRect=r,o.prevToRect=l,n||(n=t.options.animation),t.animate(o,u,l,n)),n&&(i=!0,a=Math.max(a,n),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),n),o.thisAnimationDuration=n)})),clearTimeout(n),i?n=setTimeout((function(){"function"==typeof e&&e()}),a):"function"==typeof e&&e(),o=[]},animate:function(e,t,n,o){if(o){_(e,"transition",""),_(e,"transform","");var i=S(this.el),a=(t.left-n.left)/(i&&i.a||1),r=(t.top-n.top)/(i&&i.d||1);e.animatingX=!!a,e.animatingY=!!r,_(e,"transform","translate3d("+a+"px,"+r+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),_(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),_(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){_(e,"transition",""),_(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}))}function qe(e,t,n,o,i,a,r,c){var u,d,h=e[$],p=h.options.onMove;return!window.CustomEvent||l||s?(u=document.createEvent("Event")).initEvent("move",!0,!0):u=new CustomEvent("move",{bubbles:!0,cancelable:!0}),u.to=t,u.from=e,u.dragged=n,u.draggedRect=o,u.related=i||t,u.relatedRect=a||x(t),u.willInsertAfter=c,u.originalEvent=r,e.dispatchEvent(u),p&&(d=p.call(h,u,r)),d}function $e(e){e.draggable=!1}function Le(){Se=!1}function Xe(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Ye(e){return setTimeout(e,0)}function Be(e){return clearTimeout(e)}ze.prototype={constructor:ze,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(pe=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,H):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,i=o.preventOnFilter,a=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(function(e){Ee.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&Ee.push(o)}}(n),!H&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!u||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=b(l,o.draggable,n,!1))&&l.animated||J===l)){if(ee=M(l),ne=M(l,o.draggable),"function"==typeof c){if(c.call(this,e,l,this))return K({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),j("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=b(s,o.trim(),n,!1))return K({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:n,toEl:n}),j("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());o.handle&&!b(s,o.handle,n,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,n){var o,i=this,a=i.el,r=i.options,u=a.ownerDocument;if(n&&!H&&n.parentNode===a){var d=x(n);if(U=a,V=(H=n).parentNode,G=H.nextSibling,J=n,ie=r.group,ze.dragged=H,ue=(re={target:H,clientX:(t||e).clientX,clientY:(t||e).clientY}).clientX-d.left,de=re.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,H.style["will-change"]="all",o=function(){j("delayEnded",i,{evt:e}),ze.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!c&&i.nativeDraggable&&(H.draggable=!0),i._triggerDragStart(e,t),K({sortable:i,name:"choose",originalEvent:e}),C(H,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){E(H,e.trim(),$e)})),f(u,"dragover",Re),f(u,"mousemove",Re),f(u,"touchmove",Re),f(u,"mouseup",i._onDrop),f(u,"touchend",i._onDrop),f(u,"touchcancel",i._onDrop),c&&this.nativeDraggable&&(this.options.touchStartThreshold=4,H.draggable=!0),j("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(s||l))o();else{if(ze.eventCanceled)return void this._onDrop();f(u,"mouseup",i._disableDelayedDrag),f(u,"touchend",i._disableDelayedDrag),f(u,"touchcancel",i._disableDelayedDrag),f(u,"mousemove",i._delayedDragTouchMoveHandler),f(u,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&f(u,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){H&&$e(H),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;m(e,"mouseup",this._disableDelayedDrag),m(e,"touchend",this._disableDelayedDrag),m(e,"touchcancel",this._disableDelayedDrag),m(e,"mousemove",this._delayedDragTouchMoveHandler),m(e,"touchmove",this._delayedDragTouchMoveHandler),m(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?f(document,this.options.supportPointer?"pointermove":t?"touchmove":"mousemove",this._onTouchMove):(f(H,"dragend",this),f(U,"dragstart",this._onDragStart));try{document.selection?Ye((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(ve=!1,U&&H){j("dragStarted",this,{evt:t}),this.nativeDraggable&&f(document,"dragover",Fe);var n=this.options;!e&&C(H,n.dragClass,!1),C(H,n.ghostClass,!0),ze.active=this,e&&this._appendGhost(),K({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(le){this._lastX=le.clientX,this._lastY=le.clientY,Pe();for(var e=document.elementFromPoint(le.clientX,le.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(le.clientX,le.clientY))!==t;)t=e;if(H.parentNode[$]._isOutsideThisEl(e),t)do{if(t[$]&&t[$]._onDragOver({clientX:le.clientX,clientY:le.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);Ae()}},_onTouchMove:function(e){if(re){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=W&&S(W,!0),r=W&&a&&a.a,l=W&&a&&a.d,s=xe&&ge&&N(ge),c=(i.clientX-re.clientX+o.x)/(r||1)+(s?s[0]-_e[0]:0)/(r||1),u=(i.clientY-re.clientY+o.y)/(l||1)+(s?s[1]-_e[1]:0)/(l||1);if(!ze.active&&!ve){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(W){a?(a.e+=c-(se||0),a.f+=u-(ce||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix("+a.a+","+a.b+","+a.c+","+a.d+","+a.e+","+a.f+")";_(W,"webkitTransform",d),_(W,"mozTransform",d),_(W,"msTransform",d),_(W,"transform",d),se=c,ce=u,le=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!W){var e=this.options.fallbackOnBody?document.body:U,t=x(H,!0,xe,!0,e),n=this.options;if(xe){for(ge=e;"static"===_(ge,"position")&&"none"===_(ge,"transform")&&ge!==document;)ge=ge.parentNode;ge!==document.body&&ge!==document.documentElement?(ge===document&&(ge=D()),t.top+=ge.scrollTop,t.left+=ge.scrollLeft):ge=D(),_e=N(ge)}C(W=H.cloneNode(!0),n.ghostClass,!1),C(W,n.fallbackClass,!0),C(W,n.dragClass,!0),_(W,"transition",""),_(W,"transform",""),_(W,"box-sizing","border-box"),_(W,"margin",0),_(W,"top",t.top),_(W,"left",t.left),_(W,"width",t.width),_(W,"height",t.height),_(W,"opacity","0.8"),_(W,"position",xe?"absolute":"fixed"),_(W,"zIndex","100000"),_(W,"pointerEvents","none"),ze.ghost=W,e.appendChild(W),_(W,"transform-origin",ue/parseInt(W.style.width)*100+"% "+de/parseInt(W.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,i=n.options;j("dragStart",this,{evt:e}),ze.eventCanceled?this._onDrop():(j("setupClone",this),ze.eventCanceled||((Z=F(H)).draggable=!1,Z.style["will-change"]="",this._hideClone(),C(Z,this.options.chosenClass,!1),ze.clone=Z),n.cloneId=Ye((function(){j("clone",n),ze.eventCanceled||(n.options.removeCloneOnHide||U.insertBefore(Z,H),n._hideClone(),K({sortable:n,name:"clone"}))})),!t&&C(H,i.dragClass,!0),t?(be=!0,n._loopId=setInterval(n._emulateDragOver,50)):(m(document,"mouseup",n._onDrop),m(document,"touchend",n._onDrop),m(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,H)),f(document,"drop",n),_(H,"transform","translateZ(0)")),ve=!0,n._dragStartId=Ye(n._dragStarted.bind(n,t,e)),f(document,"selectstart",n),he=!0,u&&_(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,i,r=this.el,l=e.target,s=this.options,c=s.group,u=ze.active,d=ie===c,h=s.sort,p=ae||u,f=this,m=!1;if(!Se){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=b(l,s.draggable,r,!0),z("dragOver"),ze.eventCanceled)return m;if(H.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||f._ignoreWhileAnimating===l)return L(!1);if(be=!1,u&&!s.disabled&&(d?h||(o=!U.contains(H)):ae===this||(this.lastPutMode=ie.checkPull(this,u,H,e))&&c.checkPut(this,u,H,e))){if(i="vertical"===this._getDirection(e,l),t=x(H),z("dragOverValid"),ze.eventCanceled)return m;if(o)return V=U,q(),this._hideClone(),z("revert"),ze.eventCanceled||(G?U.insertBefore(H,G):U.appendChild(H)),L(!0);var g=T(r,s.draggable);if(!g||function(e,t,n){var o=x(T(n.el,n.options.draggable));return t?e.clientX>o.right+10||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+10}(e,i,this)&&!g.animated){if(g===H)return L(!1);if(g&&r===e.target&&(l=g),l&&(n=x(l)),!1!==qe(U,r,H,t,l,n,e,!!l))return q(),r.appendChild(H),V=r,X(),L(!0)}else if(l.parentNode===r){n=x(l);var v,y,w,S=H.parentNode!==r,E=!function(e,t,n){var o=n?e.left:e.top,i=n?t.left:t.top;return o===i||(n?e.right:e.bottom)===(n?t.right:t.bottom)||o+(n?e.width:e.height)/2===i+(n?t.width:t.height)/2}(H.animated&&H.toRect||t,l.animated&&l.toRect||n,i),D=i?"top":"left",k=I(l,"top","top")||I(H,"top","top"),N=k?k.scrollTop:void 0;if(pe!==l&&(y=n[D],we=!1,Ce=!E&&s.invertSwap||S),0!==(v=function(e,t,n,o,i,a,r,l){var s=o?e.clientY:e.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,h=!1;if(!r)if(l&&me<c*i){if(!we&&(1===fe?s>u+c*a/2:s<d-c*a/2)&&(we=!0),we)h=!0;else if(1===fe?s<u+me:s>d-me)return-fe}else if(s>u+c*(1-i)/2&&s<d-c*(1-i)/2)return function(e){return M(H)<M(e)?1:-1}(t);return(h=h||r)&&(s<u+c*a/2||s>d-c*a/2)?s>u+c/2?1:-1:0}(e,l,n,i,E?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Ce,pe===l))){var P=M(H);do{w=V.children[P-=v]}while(w&&("none"===_(w,"display")||w===W))}if(0===v||w===l)return L(!1);pe=l,fe=v;var A=l.nextElementSibling,O=!1,F=qe(U,r,H,t,l,n,e,O=1===v);if(!1!==F)return 1!==F&&-1!==F||(O=1===F),Se=!0,setTimeout(Le,30),q(),O&&!A?r.appendChild(H):l.parentNode.insertBefore(H,O?A:l),k&&R(k,0,N-k.scrollTop),V=H.parentNode,void 0===y||Ce||(me=Math.abs(y-x(l)[D])),X(),L(!0)}if(r.contains(H))return L(!1)}return!1}function z(s,c){j(s,f,a({evt:e,isOwner:d,axis:i?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:h,fromSortable:p,target:l,completed:L,onMove:function(n,o){return qe(U,r,H,t,n,x(n),e,o)},changed:X},c))}function q(){z("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function L(t){return z("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(f),f!==p&&(C(H,ae?ae.options.ghostClass:u.options.ghostClass,!1),C(H,s.ghostClass,!0)),ae!==f&&f!==ze.active?ae=f:f===ze.active&&ae&&(ae=null),p===f&&(f._ignoreWhileAnimating=l),f.animateAll((function(){z("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(l===H&&!H.animated||l===r&&!l.animated)&&(pe=null),s.dragoverBubble||e.rootEl||l===document||(H.parentNode[$]._isOutsideThisEl(e.target),!t&&Re(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function X(){te=M(H),oe=M(H,s.draggable),K({sortable:f,name:"change",toEl:r,newIndex:te,newDraggableIndex:oe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){m(document,"mousemove",this._onTouchMove),m(document,"touchmove",this._onTouchMove),m(document,"pointermove",this._onTouchMove),m(document,"dragover",Re),m(document,"mousemove",Re),m(document,"touchmove",Re)},_offUpEvents:function(){var e=this.el.ownerDocument;m(e,"mouseup",this._onDrop),m(e,"touchend",this._onDrop),m(e,"pointerup",this._onDrop),m(e,"touchcancel",this._onDrop),m(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;te=M(H),oe=M(H,n.draggable),j("drop",this,{evt:e}),V=H&&H.parentNode,te=M(H),oe=M(H,n.draggable),ze.eventCanceled||(ve=!1,Ce=!1,we=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Be(this.cloneId),Be(this._dragStartId),this.nativeDraggable&&(m(document,"drop",this),m(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),u&&_(document.body,"user-select",""),_(H,"transform",""),e&&(he&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),W&&W.parentNode&&W.parentNode.removeChild(W),(U===V||ae&&"clone"!==ae.lastPutMode)&&Z&&Z.parentNode&&Z.parentNode.removeChild(Z),H&&(this.nativeDraggable&&m(H,"dragend",this),$e(H),H.style["will-change"]="",he&&!ve&&C(H,ae?ae.options.ghostClass:this.options.ghostClass,!1),C(H,this.options.chosenClass,!1),K({sortable:this,name:"unchoose",toEl:V,newIndex:null,newDraggableIndex:null,originalEvent:e}),U!==V?(te>=0&&(K({rootEl:V,name:"add",toEl:V,fromEl:U,originalEvent:e}),K({sortable:this,name:"remove",toEl:V,originalEvent:e}),K({rootEl:V,name:"sort",toEl:V,fromEl:U,originalEvent:e}),K({sortable:this,name:"sort",toEl:V,originalEvent:e})),ae&&ae.save()):te!==ee&&te>=0&&(K({sortable:this,name:"update",toEl:V,originalEvent:e}),K({sortable:this,name:"sort",toEl:V,originalEvent:e})),ze.active&&(null!=te&&-1!==te||(te=ee,oe=ne),K({sortable:this,name:"end",toEl:V,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){j("nulling",this),U=H=V=W=G=Z=J=Q=re=le=he=te=oe=ee=ne=pe=fe=ae=ie=ze.dragged=ze.ghost=ze.clone=ze.active=null,Ee.forEach((function(e){e.checked=!0})),Ee.length=se=ce=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":H&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,i=n.length,a=this.options;o<i;o++)b(e=n[o],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||Xe(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,o){var i=n.children[o];b(i,this.options.draggable,n,!1)&&(t[e]=i)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return b(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=Y.modifyOption(this,e,t);n[e]=void 0!==o?o:t,"group"===e&&Ne(n)},destroy:function(){j("destroy",this);var e=this.el;e[$]=null,m(e,"mousedown",this._onTapStart),m(e,"touchstart",this._onTapStart),m(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(m(e,"dragover",this),m(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),ye.splice(ye.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Q){if(j("hideClone",this),ze.eventCanceled)return;_(Z,"display","none"),this.options.removeCloneOnHide&&Z.parentNode&&Z.parentNode.removeChild(Z),Q=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Q){if(j("showClone",this),ze.eventCanceled)return;H.parentNode!=U||this.options.group.revertClone?G?U.insertBefore(Z,G):U.appendChild(Z):U.insertBefore(Z,H),this.options.group.revertClone&&this.animate(H,Z),_(Z,"display",""),Q=!1}}else this._hideClone()}},De&&f(document,"touchmove",(function(e){(ze.active||ve)&&e.cancelable&&e.preventDefault()})),ze.utils={on:f,off:m,css:_,find:E,is:function(e,t){return!!b(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:O,closest:b,toggleClass:C,clone:F,index:M,nextTick:Ye,cancelNextTick:Be,detectDirection:Me,getChild:k},ze.get=function(e){return e[$]},ze.mount=function(){var e=[].slice.call(arguments);e[0].constructor===Array&&(e=e[0]),e.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not "+{}.toString.call(e);e.utils&&(ze.utils=a({},ze.utils,e.utils)),Y.mount(e)}))},ze.create=function(e,t){return new ze(e,t)},ze.version="1.12.0";var je,Ke,He,Ve,We,Ue=[],Ge=[],Je=!1,Ze=!1,Qe=!1;function et(e,t){Ge.forEach((function(n,o){var i=t.children[n.sortableIndex+(e?Number(o):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}function tt(){Ue.forEach((function(e){e!==He&&e.parentNode&&e.parentNode.removeChild(e)}))}var nt=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,i=e.dispatchSortableEvent,a=e.unhideGhostForTarget;if(t){var r=n||e.activeSortable;(0,e.hideGhostForTarget)();var l=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,s=document.elementFromPoint(l.clientX,l.clientY);a(),r&&!r.el.contains(s)&&(i("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function ot(){}function it(){}ot.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=k(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:nt},Object.assign(ot,{pluginName:"revertOnSpill"}),it.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:nt},Object.assign(it,{pluginName:"removeOnSpill"});var at,rt,lt,st,ct,ut,dt=[],ht=!1;function pt(){dt.forEach((function(e){clearInterval(e.pid)})),dt=[]}function ft(){clearInterval(ut)}var mt=O((function(e,t,n,o){if(t.scroll){var i,a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=D(),u=!1;rt!==n&&(rt=n,pt(),i=t.scrollFn,!0===(at=t.scroll)&&(at=P(n,!0)));var d=0,h=at;do{var p=h,f=x(p),m=f.top,g=f.bottom,v=f.left,b=f.right,y=f.width,w=f.height,C=void 0,S=void 0,E=p.scrollWidth,I=p.scrollHeight,k=_(p),T=p.scrollLeft,M=p.scrollTop;p===c?(C=y<E&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),S=w<I&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(C=y<E&&("auto"===k.overflowX||"scroll"===k.overflowX),S=w<I&&("auto"===k.overflowY||"scroll"===k.overflowY));var N=C&&(Math.abs(b-a)<=l&&T+y<E)-(Math.abs(v-a)<=l&&!!T),A=S&&(Math.abs(g-r)<=l&&M+w<I)-(Math.abs(m-r)<=l&&!!M);if(!dt[d])for(var O=0;O<=d;O++)dt[O]||(dt[O]={});dt[d].vx==N&&dt[d].vy==A&&dt[d].el===p||(dt[d].el=p,dt[d].vx=N,dt[d].vy=A,clearInterval(dt[d].pid),0==N&&0==A||(u=!0,dt[d].pid=setInterval(function(){o&&0===this.layer&&ze.active._onTouchMove(ct);var t=dt[this.layer].vy?dt[this.layer].vy*s:0,n=dt[this.layer].vx?dt[this.layer].vx*s:0;"function"==typeof i&&"continue"!==i.call(ze.dragged.parentNode[$],n,t,e,ct,dt[this.layer].el)||R(dt[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=P(h,!1)));ht=u}}),30);ze.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):f(document,this.options.supportPointer?"pointermove":t.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):(m(document,"pointermove",this._handleFallbackAutoScroll),m(document,"touchmove",this._handleFallbackAutoScroll),m(document,"mousemove",this._handleFallbackAutoScroll)),ft(),pt(),clearTimeout(y),y=void 0},nulling:function(){ct=rt=at=ht=ut=lt=st=null,dt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,i);if(ct=e,t||s||l||u){mt(e,this.options,a,t);var r=P(a,!0);!ht||ut&&o===lt&&i===st||(ut&&ft(),ut=setInterval((function(){var a=P(document.elementFromPoint(o,i),!0);a!==r&&(r=a,pt()),mt(e,n.options,a,t)}),10),lt=o,st=i)}else{if(!this.options.bubbleScroll||P(a,!0)===D())return void pt();mt(e,this.options,P(a,!1),!1)}}},Object.assign(e,{pluginName:"scroll",initializeByDefault:!0})}),ze.mount(it,ot),ze.mount(new function(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){Oe=e.dragEl},dragOverValid:function(e){var t=e.completed,n=e.target,o=e.changed,i=e.cancel;if(e.activeSortable.options.swap){var a=this.options;if(n&&n!==this.sortable.el){var r=Oe;!1!==(0,e.onMove)(n)?(C(n,a.swapClass,!0),Oe=n):Oe=null,r&&r!==Oe&&C(r,a.swapClass,!1)}o(),t(!0),i()}},drop:function(e){var t,n,o,i,a,r,l=e.activeSortable,s=e.putSortable,c=e.dragEl,u=s||this.sortable,d=this.options;Oe&&C(Oe,d.swapClass,!1),Oe&&(d.swap||s&&s.options.swap)&&c!==Oe&&(u.captureAnimationState(),u!==l&&l.captureAnimationState(),r=(n=Oe).parentNode,(a=(t=c).parentNode)&&r&&!a.isEqualNode(n)&&!r.isEqualNode(t)&&(o=M(t),i=M(n),a.isEqualNode(r)&&o<i&&i++,a.insertBefore(n,a.children[o]),r.insertBefore(t,r.children[i])),u.animateAll(),u!==l&&l.animateAll())},nulling:function(){Oe=null}},Object.assign(e,{pluginName:"swap",eventProperties:function(){return{swapItem:Oe}}})}),ze.mount(new function(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?f(document,"pointerup",this._deselectMultiDrag):(f(document,"mouseup",this._deselectMultiDrag),f(document,"touchend",this._deselectMultiDrag)),f(document,"keydown",this._checkKeyDown),f(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var o="";Ue.length&&Ke===e?Ue.forEach((function(e,t){o+=(t?", ":"")+e.textContent})):o=n.textContent,t.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){He=e.dragEl},delayEnded:function(){this.isMultiDrag=~Ue.indexOf(He)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var o=0;o<Ue.length;o++)Ge.push(F(Ue[o])),Ge[o].sortableIndex=Ue[o].sortableIndex,Ge[o].draggable=!1,Ge[o].style["will-change"]="",C(Ge[o],this.options.selectedClass,!1),Ue[o]===He&&C(Ge[o],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.dispatchSortableEvent,n=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ue.length&&Ke===e.sortable&&(et(!0,e.rootEl),t("clone"),n()))},showClone:function(e){var t=e.cloneNowShown,n=e.cancel;this.isMultiDrag&&(et(!1,e.rootEl),Ge.forEach((function(e){_(e,"display","")})),t(),We=!1,n())},hideClone:function(e){var t=this,n=e.cloneNowHidden,o=e.cancel;this.isMultiDrag&&(Ge.forEach((function(e){_(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),We=!0,o())},dragStartGlobal:function(e){!this.isMultiDrag&&Ke&&Ke.multiDrag._deselectMultiDrag(),Ue.forEach((function(e){e.sortableIndex=M(e)})),Ue=Ue.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),Qe=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){Ue.forEach((function(e){e!==He&&_(e,"position","absolute")}));var o=x(He,!1,!0,!0);Ue.forEach((function(e){e!==He&&z(e,o)})),Ze=!0,Je=!0}n.animateAll((function(){Ze=!1,Je=!1,t.options.animation&&Ue.forEach((function(e){q(e)})),t.options.sort&&tt()}))}},dragOver:function(e){var t=e.completed,n=e.cancel;Ze&&~Ue.indexOf(e.target)&&(t(!1),n())},revert:function(e){var t=e.fromSortable,n=e.rootEl,o=e.sortable,i=e.dragRect;Ue.length>1&&(Ue.forEach((function(e){o.addAnimationState({target:e,rect:Ze?x(e):i}),q(e),e.fromRect=i,t.removeAnimationState(e)})),Ze=!1,function(e,t){Ue.forEach((function(n,o){var i=t.children[n.sortableIndex+(e?Number(o):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,o=e.activeSortable,i=e.parentEl,a=e.putSortable,r=this.options;if(e.insertion){if(n&&o._hideClone(),Je=!1,r.animation&&Ue.length>1&&(Ze||!n&&!o.options.sort&&!a)){var l=x(He,!1,!0,!0);Ue.forEach((function(e){e!==He&&(z(e,l),i.appendChild(e))})),Ze=!0}if(!n)if(Ze||tt(),Ue.length>1){var s=We;o._showClone(t),o.options.animation&&!We&&s&&Ge.forEach((function(e){o.addAnimationState({target:e,rect:Ve}),e.fromRect=Ve,e.thisAnimationDuration=null}))}else o._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,o=e.activeSortable;if(Ue.forEach((function(e){e.thisAnimationDuration=null})),o.options.animation&&!n&&o.multiDrag.isMultiDrag){Ve=Object.assign({},t);var i=S(He,!0);Ve.top-=i.f,Ve.left-=i.e}},dragOverAnimationComplete:function(){Ze&&(Ze=!1,tt())},drop:function(e){var t=e.originalEvent,n=e.rootEl,o=e.parentEl,i=e.sortable,a=e.dispatchSortableEvent,r=e.oldIndex,l=e.putSortable,s=l||this.sortable;if(t){var c=this.options,u=o.children;if(!Qe)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),C(He,c.selectedClass,!~Ue.indexOf(He)),~Ue.indexOf(He))Ue.splice(Ue.indexOf(He),1),je=null,B({sortable:i,rootEl:n,name:"deselect",targetEl:He,originalEvt:t});else{if(Ue.push(He),B({sortable:i,rootEl:n,name:"select",targetEl:He,originalEvt:t}),t.shiftKey&&je&&i.el.contains(je)){var d,h,p=M(je),f=M(He);if(~p&&~f&&p!==f)for(f>p?(h=p,d=f):(h=f,d=p+1);h<d;h++)~Ue.indexOf(u[h])||(C(u[h],c.selectedClass,!0),Ue.push(u[h]),B({sortable:i,rootEl:n,name:"select",targetEl:u[h],originalEvt:t}))}else je=He;Ke=s}if(Qe&&this.isMultiDrag){if((o[$].options.sort||o!==n)&&Ue.length>1){var m=x(He),g=M(He,":not(."+this.options.selectedClass+")");if(!Je&&c.animation&&(He.thisAnimationDuration=null),s.captureAnimationState(),!Je&&(c.animation&&(He.fromRect=m,Ue.forEach((function(e){if(e.thisAnimationDuration=null,e!==He){var t=Ze?x(e):m;e.fromRect=t,s.addAnimationState({target:e,rect:t})}}))),tt(),Ue.forEach((function(e){u[g]?o.insertBefore(e,u[g]):o.appendChild(e),g++})),r===M(He))){var v=!1;Ue.forEach((function(e){e.sortableIndex===M(e)||(v=!0)})),v&&a("update")}Ue.forEach((function(e){q(e)})),s.animateAll()}Ke=s}(n===o||l&&"clone"!==l.lastPutMode)&&Ge.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=Qe=!1,Ge.length=0},destroyGlobal:function(){this._deselectMultiDrag(),m(document,"pointerup",this._deselectMultiDrag),m(document,"mouseup",this._deselectMultiDrag),m(document,"touchend",this._deselectMultiDrag),m(document,"keydown",this._checkKeyDown),m(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==Qe&&Qe||Ke!==this.sortable||e&&b(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;Ue.length;){var t=Ue[0];C(t,this.options.selectedClass,!1),Ue.shift(),B({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Object.assign(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[$];t&&t.options.multiDrag&&!~Ue.indexOf(e)&&(Ke&&Ke!==t&&(Ke.multiDrag._deselectMultiDrag(),Ke=t),C(e,t.options.selectedClass,!0),Ue.push(e))},deselect:function(e){var t=e.parentNode[$],n=Ue.indexOf(e);t&&t.options.multiDrag&&~n&&(C(e,t.options.selectedClass,!1),Ue.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return Ue.forEach((function(o){var i;t.push({multiDragElement:o,index:o.sortableIndex}),i=Ze&&o!==He?-1:Ze?M(o,":not(."+e.options.selectedClass+")"):M(o),n.push({multiDragElement:o,index:i})})),{items:[].concat(Ue),clones:[].concat(Ge),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})});var gt=ze,vt=n("fed1"),bt=n.n(vt),yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.supportStrategy?n("div",[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"element-loading-text":"保存并初始化中.",id:"siteForm",model:e.driveItem,rules:e.rules,"label-width":"auto","status-icon":!0}},[n("el-row",{attrs:{gutter:50}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"驱动器名称",prop:"name"}},[n("el-input",{model:{value:e.driveItem.name,callback:function(t){e.$set(e.driveItem,"name",t)},expression:"driveItem.name"}})],1),n("el-form-item",{attrs:{label:"是否启用"}},[n("el-switch",{model:{value:e.driveItem.enable,callback:function(t){e.$set(e.driveItem,"enable",t)},expression:"driveItem.enable"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                            如不启用，则不在首页展示。\n                        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"开启缓存"}},[n("el-switch",{model:{value:e.driveItem.enableCache,callback:function(t){e.$set(e.driveItem,"enableCache",t)},expression:"driveItem.enableCache"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                            开启缓存后，N 秒内重复请求相同文件夹，不会重复调用 API。\n                            "),n("br"),e._v("\n                            参数 N 在配置文件中设置 {zfile.cache.timeout}，默认为 1800 秒。\n                        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"开启缓存自动刷新"}},[n("el-switch",{model:{value:e.driveItem.autoRefreshCache,callback:function(t){e.$set(e.driveItem,"autoRefreshCache",t)},expression:"driveItem.autoRefreshCache"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                            每隔 N 秒检测到期的缓存, 对于过期缓存尝试调用 API, 重新写入缓存.\n                            "),n("br"),e._v("\n                            参数 N 在配置文件中设置 {zfile.cache.auto-refresh-interval}，默认为 5 秒。\n                        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"存储策略",prop:"type"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择存储策略"},model:{value:e.driveItem.type,callback:function(t){e.$set(e.driveItem,"type",t)},expression:"driveItem.type"}},e._l(e.supportStrategy,(function(e){return n("el-option",{key:e.key,attrs:{label:e.description,value:e.key}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[e._l(e.storageStrategyForm,(function(t){return n("el-form-item",{key:t.title,attrs:{label:t.title,prop:"storageStrategyConfig."+t.key}},[n("el-col",{staticClass:"el-drive-form-col",attrs:{span:22}},["endPoint"===t.key&&e.region.hasOwnProperty(e.driveItem.type)?n("el-select",{model:{value:e.driveItem.storageStrategyConfig.endPoint,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"endPoint",t)},expression:"driveItem.storageStrategyConfig.endPoint"}},e._l(e.region[e.driveItem.type],(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.val}})})),1):"pathStyle"===t.key?n("div",[n("el-select",{model:{value:e.driveItem.storageStrategyConfig.pathStyle,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"pathStyle",t)},expression:"driveItem.storageStrategyConfig.pathStyle"}},[n("el-option",{attrs:{label:"bucket-virtual-hosting",value:"bucket-virtual-hosting"}}),n("el-option",{attrs:{label:"path-style",value:"path-style"}})],1),n("el-link",{staticClass:"zfile-word-aux",attrs:{target:"_blank",icon:"el-icon-document",href:"https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/dev/VirtualHosting.html#path-style-access"}},[e._v("查看 S3 API 说明文档")])],1):"isPrivate"===t.key?n("div",[n("el-switch",{model:{value:e.driveItem.storageStrategyConfig.isPrivate,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"isPrivate",t)},expression:"driveItem.storageStrategyConfig.isPrivate"}}),n("span",{staticClass:"zfile-word-aux"},[e._v("私有空间会生成带签名的下载链接")])],1):n("el-input",{attrs:{placeholder:""},on:{input:function(t){return e.change(t)}},model:{value:e.driveItem.storageStrategyConfig[t.key],callback:function(n){e.$set(e.driveItem.storageStrategyConfig,t.key,n)},expression:"driveItem.storageStrategyConfig[item.key]"}})],1),"basePath"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                基路径表示从哪个路径开始文件, 不填写表示从根开始\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"siteId"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v('\n                                直接拷贝"site-id"即可,无需"sites/"和前面域名 '),n("br"),e._v("\n                                例:xxxx.sharepoint.com,b9079a13-xxxx-4d55-xxxx-20744xxxx743,1b774b83-xxxx-44ca-8dde-73bxxxx0e013\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"filePath"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                Linux 或对象存储等需以 / 开头.\n                                "),n("br"),e._v("\n                                Windows 支持 C:/ 类的盘符开头.\n                                "),n("br"),e._v("\n                                结尾不需要加 "),n("b",[e._v("/")]),e._v(".\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"domain"===t.key&&"ftp"===e.driveItem.type?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                此域名表示 http 访问域名，如有端口，也需要写明。\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e()],1)})),"onedrive"===e.driveItem.type?n("el-form-item",[n("el-link",{attrs:{target:"_blank",icon:"el-icon-edit",href:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=09939809-c617-43c8-a220-a93c1513c5d4&response_type=code&redirect_uri=https://zfile.jun6.net/onedrive/callback&scope=offline_access%20User.Read%20Files.ReadWrite.All"}},[e._v("前往获取授权")])],1):e._e(),"onedrive-china"===e.driveItem.type?n("el-form-item",[n("el-link",{attrs:{target:"_blank",icon:"el-icon-edit",href:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize?client_id=4a72d927-1907-488d-9eb2-1b465c53c1c5&response_type=code&redirect_uri=https://zfile.jun6.net/onedrive/china-callback&scope=offline_access%20User.Read%20Files.ReadWrite.All"}},[e._v("前往获取授权")])],1):e._e(),"sharepoint"===e.driveItem.type?n("el-form-item",[n("el-link",{attrs:{target:"_blank",icon:"el-icon-edit",href:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=09939809-c617-43c8-a220-a93c1513c5d4&response_type=code&redirect_uri=https://zfile.jun6.net/onedrive/callback&scope=offline_access%20User.Read%20Files.ReadWrite.All"}},[e._v("前往获取授权")]),n("br"),n("el-link",{attrs:{target:"_blank",icon:"el-icon-edit-outline",href:"https://od.xkx.me/sp.php"}},[e._v("获取siteId")])],1):e._e(),"sharepoint-china"===e.driveItem.type?n("el-form-item",[n("el-link",{attrs:{target:"_blank",icon:"el-icon-edit",href:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize?client_id=4a72d927-1907-488d-9eb2-1b465c53c1c5&response_type=code&redirect_uri=https://zfile.jun6.net/onedrive/china-callback&scope=offline_access%20User.Read%20Files.ReadWrite.All"}},[e._v("前往获取授权")]),n("br"),n("el-link",{attrs:{target:"_blank",icon:"el-icon-edit-outline",href:"https://od.xkx.me/sp.php"}},[e._v("获取siteId")])],1):e._e(),"ftp"===e.driveItem.type?n("el-form-item",[n("div",{staticClass:"zfile-word-aux zfile-margin-left-unset"},[e._v("\n                        注意: FTP 协议，如果不填写加速域名 (HTTP 下载地址)，则会使用 FTP 协议进行下载\n                        "),n("br"),e._v("\n                        FTP 协议会在 URL 中暴露用户名密码，如："),n("b",[e._v("ftp://用户名:密码@IP:端口/文件路径/文件名")]),n("br"),e._v("\n                        如为 FTP 提供了加速域名 (HTTP 下载地址)，则会使用 HTTP 协议，如："),n("b",[e._v("http(s)://加速域名/文件路径/文件名")])])]):e._e()],2)],1)],1),n("div",{staticClass:"zfile-text-align-center",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:function(t){return e.submitForm("form")}}},[e._v("保 存")]),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1):e._e()},wt=[],Ct={aliyun:[{name:"华东 1（杭州）",val:"oss-cn-hangzhou.aliyuncs.com"},{name:"华东 2（上海）",val:"oss-cn-shanghai.aliyuncs.com"},{name:"华北 1（青岛）",val:"oss-cn-qingdao.aliyuncs.com"},{name:"华北 2（北京）",val:"oss-cn-beijing.aliyuncs.com"},{name:"华北 3（张家口）",val:"oss-cn-zhangjiakou.aliyuncs.com"},{name:"华北 5（呼和浩特）",val:"oss-cn-huhehaote.aliyuncs.com"},{name:"华南 1（深圳）",val:"oss-cn-shenzhen.aliyuncs.com"},{name:"西南 1（成都）",val:"oss-cn-chengdu.aliyuncs.com"},{name:"中国（香港）",val:"oss-cn-hongkong.aliyuncs.com"},{name:"美国西部 1 （硅谷）",val:"oss-us-west-1.aliyuncs.com"},{name:"美国东部 1 （弗吉尼亚）",val:"oss-us-east-1.aliyuncs.com"},{name:"亚太东南 1 （新加坡）",val:"oss-ap-southeast-1.aliyuncs.com"},{name:"亚太东南 2 （悉尼）",val:"oss-ap-southeast-2.aliyuncs.com"},{name:"亚太东南 3 （吉隆坡）",val:"oss-ap-southeast-3.aliyuncs.com"},{name:"亚太东南 5 （雅加达）",val:"oss-ap-southeast-5.aliyuncs.com"},{name:"亚太东北 1 （日本）",val:"oss-ap-northeast-1.aliyuncs.com"},{name:"亚太南部 1 （孟买）",val:"oss-ap-south-1.aliyuncs.com"},{name:"欧洲中部 1 （法兰克福）",val:"oss-eu-central-1.aliyuncs.com"},{name:"英国（伦敦）",val:"oss-eu-west-1.aliyuncs.com"},{name:"中东东部 1 （迪拜）",val:"oss-me-east-1.aliyuncs.com"}],tencent:[{name:"北京",val:"cos.ap-beijing.myqcloud.com"},{name:"上海",val:"cos.ap-shanghai.myqcloud.com"},{name:"广州",val:"cos.ap-guangzhou.myqcloud.com"},{name:"成都",val:"cos.ap-chengdu.myqcloud.com"},{name:"重庆",val:"cos.ap-chongqing.myqcloud.com"},{name:"深圳金融",val:"cos.ap-shenzhen-fsi.myqcloud.com"},{name:"上海金融",val:"cos.ap-shanghai-fsi.myqcloud.com"},{name:"北京金融",val:"cos.ap-beijing-fsi.myqcloud.com"},{name:"中国香港",val:"cos.ap-hongkong.myqcloud.com"},{name:"新加坡",val:"cos.ap-singapore.myqcloud.com"},{name:"孟买",val:"cos.ap-mumbai.myqcloud.com"},{name:"首尔",val:"cos.ap-seoul.myqcloud.com"},{name:"曼谷",val:"cos.ap-bangkok.myqcloud.com"},{name:"东京",val:"cos.ap-tokyo.myqcloud.com"},{name:"硅谷",val:"cos.na-siliconvalley.myqcloud.com"},{name:"弗吉尼亚",val:"cos.na-ashburn.myqcloud.com"},{name:"多伦多",val:"cos.na-toronto.myqcloud.com"},{name:"法兰克福",val:"cos.eu-frankfurt.myqcloud.com"},{name:"莫斯科",val:"cos.eu-moscow"}],huawei:[{name:"非洲-约翰内斯堡",val:"obs.af-south-1.myhuaweicloud.com"},{name:"华北-北京四",val:"obs.cn-north-4.myhuaweicloud.com"},{name:"华北-北京一",val:"obs.cn-north-1.myhuaweicloud.com"},{name:"华东-上海二",val:"obs.cn-east-2.myhuaweicloud.com"},{name:"华东-上海一",val:"obs.cn-east-3.myhuaweicloud.com"},{name:"华南-广州",val:"obs.cn-south-1.myhuaweicloud.com"},{name:"西南-贵阳一",val:"obs.cn-southwest-2.myhuaweicloud.com"},{name:"亚太-曼谷",val:"obs.ap-southeast-2.myhuaweicloud.com"},{name:"亚太-香港",val:"obs.ap-southeast-1.myhuaweicloud.com"},{name:"亚太-新加坡",val:"obs.ap-southeast-3.myhuaweicloud.com"}],qiniu:[{name:"华东",val:"s3-cn-east-1.qiniucs.com"},{name:"华北",val:"s3-cn-north-1.qiniucs.com"},{name:"华南",val:"s3-cn-south-1.qiniucs.com"},{name:"北美",val:"s3-us-north-1.qiniucs.com"},{name:"东南亚",val:"s3-ap-southeast-1.qiniucs.com"}]},_t=Ct,St={name:"DriveEdit",props:{driveItem:{orderNum:null,name:"",type:null,searchEnable:!1,searchIgnoreCase:!1,searchContainEncryptedFile:!1,enableCache:!1,autoRefreshCache:!1,storageStrategyConfig:{endPoint:"",pathStyle:"",isPrivate:!1,accessKey:null,secretKey:null,bucketName:null,host:null,port:null,filePath:null,accessToken:null,refreshToken:null,secretId:null,username:null,password:null,basePath:"",siteId:"",domain:""}},supportStrategy:null,dialogVisible:null},watch:{"driveItem.type":function(e){var t=this;e&&this.$http.get("admin/strategy-form",{params:{storageType:e}}).then((function(e){t.storageStrategyForm=e.data.data}))}},data:function(){var e=this;return{region:_t,loading:!1,storageStrategyForm:[],rules:{siteName:[{required:!0,message:"请输入站点名称",trigger:"change"}],username:[{required:!0,message:"请输入管理员账号",trigger:"change"}],password:[{required:!0,message:"请输入管理员密码",trigger:"change"}],domain:[{required:!0,type:"url",message:"请输入正确的域名, 需以 http:// 或 https:// 开头",trigger:"change"}],type:[{required:!0,message:"存储策略不能为空",trigger:"change"}],"storageStrategyConfig.domain":[{validator:function(t,n,o){var i=/(http|https):\/\/([\w.]+\/?)\S*/;void 0!==n&&""!==n||"ftp"!==e.driveItem.type?void 0!==n&&""!==n?i.test(n)?o():o(new Error("请输入正确的域名, 需以 http:// 或 https:// 开头")):o(new Error("域名不能为空")):o()},type:"url",trigger:"change"}],"storageStrategyConfig.username":[{validator:function(t,n,o){"upyun"!==e.driveItem.type&&"ufile"!==e.driveItem.type||void 0!==n&&""!==n?o():o(new Error("操作员名称不能为空"))}}],"storageStrategyConfig.password":[{validator:function(t,n,o){"upyun"!==e.driveItem.type&&"ufile"!==e.driveItem.type||void 0!==n&&""!==n?o():o(new Error("操作员密码不能为空"))}}],"storageStrategyConfig.endPoint":[{required:!0,message:"区域不能为空"}],"storageStrategyConfig.accessKey":[{required:!0,message:"AccessKey 不能为空"}],"storageStrategyConfig.filePath":[{required:!0,message:"文件路径不能为空"}],"storageStrategyConfig.secretKey":[{required:!0,message:"SecretKey 不能为空"}],"storageStrategyConfig.bucketName":[{required:!0,message:"此项不能为空"}],"storageStrategyConfig.host":[{required:!0,message:"域名或 IP 不能为空"}],"storageStrategyConfig.port":[{required:!0,message:"端口不能为空"}],"storageStrategyConfig.accessToken":[{required:!0,message:"访问令牌不能为空"}],"storageStrategyConfig.refreshToken":[{required:!0,message:"刷新令牌不能为空"}],"storageStrategyConfig.siteId":[{required:!0,message:"SharePoint的siteId不能为空"}],"storageStrategyConfig.secretId":[{required:!0,message:"SecretId 不能为空"}]}}},methods:{change:function(){this.$forceUpdate()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.$http.post("admin/drive",t.driveItem).then((function(e){var n=e.data;t.$message({message:n.msg,type:0===n.code?"success":"error",duration:1500}),t.dialogVisible=!1,t.init(),t.loading=!1})).catch((function(){t.loading=!1}))}))}}},Et=St,Dt=(n("98b8"),n("c701")),xt=Object(Dt["a"])(Et,yt,wt,!1,null,"bde4eb48",null),It=xt.exports,kt={name:"DriveList",components:{DriveEdit:It},data:function(){return{loading:!1,driveList:[],supportStrategy:[],driveItem:{orderNum:null,name:"",type:null,searchEnable:!1,searchIgnoreCase:!1,searchContainEncryptedFile:!1,enableCache:!1,autoRefreshCache:!1,storageStrategyConfig:{endPoint:"",pathStyle:"",isPrivate:!1,accessKey:null,secretKey:null,bucketName:null,host:null,port:null,filePath:null,accessToken:null,refreshToken:null,secretId:null,username:null,password:null,basePath:"",domain:""}},driveCacheInfo:{cacheCount:0,hitCount:0,missCount:0,cacheKeys:[]},sortable:null,filterForm:{filterList:[]},driveEditDialogVisible:!1,filterDialogVisible:!1,cacheManageVisible:!1,currentCacheManageId:null,cacheSearch:""}},methods:{setSort:function(){var e=this,t=document.querySelector(".el-table__body-wrapper tbody");gt.create(t,{onEnd:function(t){if(!(e.driveList.length<2)){var n=e.driveList.splice(t.oldIndex,1)[0];e.driveList.splice(t.newIndex,0,n),e.$http.post("admin/drive/drag",e.driveList).then((function(){e.$message({message:"调整排序成功",type:"success"})}))}}})},clearCache:function(){var e=this;this.$http.post("admin/cache/".concat(this.currentCacheManageId,"/clear")).then((function(){e.loadCacheManageData(),e.$message({message:"清理成功",type:"success"})}))},closeCacheManage:function(){this.cacheSearch=""},refreshCache:function(e){var t=this;this.$http.post("admin/cache/"+this.currentCacheManageId+"/refresh",bt.a.stringify({key:e.name})).then((function(){t.$message({message:"刷新成功",type:"success"})}))},saveFilterForm:function(){var e=this;this.$http.post("admin/drive/".concat(this.currentCacheManageId,"/filters"),this.filterForm.filterList).then((function(){e.$message({message:"保存成功",type:"success"}),e.filterDialogVisible=!1}))},showFilterDialog:function(e){var t=this;this.currentCacheManageId=e.id,this.$http.get("admin/drive/".concat(this.currentCacheManageId,"/filters")).then((function(e){t.filterForm.filterList=e.data.data,t.filterDialogVisible=!0}))},addFilterItem:function(){this.filterForm.filterList.push({expression:"",driveId:this.currentCacheManageId})},deleteFilterItem:function(e){this.filterForm.filterList.splice(e,1)},cacheManage:function(e){this.currentCacheManageId=e.id,this.loadCacheManageData()},refreshCacheManageData:function(){this.loadCacheManageData(),this.$message({message:"刷新成功",type:"success"})},loadCacheManageData:function(){var e=this;this.$http.get("admin/cache/"+this.currentCacheManageId+"/info").then((function(t){var n=t.data.data,o=n.cacheKeys;o.sort((function(e,t){return e.length-t.length}));for(var i=[],a=0;a<o.length;a++)i[a]={name:o[a]};n.cacheKeys=i,e.driveCacheInfo=n,e.cacheManageVisible=!0}))},switchEnableStatus:function(e){var t=this,n=e.enable?"enable":"disable";this.$http.post("admin/drive/"+e.id+"/"+n).then((function(){t.$message.success("修改成功")}))},switchCacheEnableStatus:function(e){var t=this,n=e.enableCache?"enable":"disable";this.$http.post("admin/cache/"+e.id+"/"+n).then((function(){t.$message.success("修改成功")}))},switchAutoRefreshStatus:function(e){var t=this,n=e.autoRefreshCache?"start":"stop";this.$http.post("admin/cache/"+e.id+"/auto-refresh/"+n).then((function(){t.$message.success("修改成功")}))},typeFormatter:function(e,t,n){for(var o in this.supportStrategy)if(this.supportStrategy[o].key===n)return this.supportStrategy[o].description},editDrive:function(e){var t=this;this.$http.get("admin/drive/"+e.id).then((function(e){var n=e.data.data;n.type=n.type.key,t.driveItem=n,t.driveEditDialogVisible=!0}))},deleteDrive:function(e){var t=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(n){"confirm"===n&&t.$http.delete("admin/drive/"+e.id).then((function(e){0===e.data.code?(t.$message.success("删除成功"),t.init()):t.$message.success("删除失败")}))}})},addDrive:function(){Object.assign(this.driveItem,this.$options.data().driveItem),this.driveItem.id=null,this.driveEditDialogVisible=!0,console.log(this.supportStrategy)},init:function(){var e=this;this.$http.get("admin/support-strategy").then((function(t){e.supportStrategy=t.data.data})),this.$http.get("admin/drives").then((function(t){var n=t.data.data;for(var o in n)n[o].type=n[o].type.key;e.driveList=t.data.data}))}},mounted:function(){this.init(),this.setSort()}},Tt=kt,Mt=(n("1d20"),Object(Dt["a"])(Tt,o,i,!1,null,"b9480274",null));t["default"]=Mt.exports},"98b8":function(e,t,n){"use strict";n("b07e")},b07e:function(e,t,n){}}]);